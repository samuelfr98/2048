(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,i){},12:function(e,t,i){},14:function(e,t,i){"use strict";i.r(t);var n=i(1),s=i.n(n),r=i(3),a=i.n(r),o=(i(11),i(6)),h=(i(12),i(4)),f=i(5),c=function(){function e(t){Object(h.a)(this,e),this.gameState={board:new Array(t*t).fill(0),score:0,won:!1,over:!1},this.dimensions=t,this.moveListeners=[],this.winListeners=[],this.loseListeners=[],this.same=!1,this.setupNewGame()}return Object(f.a)(e,[{key:"setupNewGame",value:function(){this.gameState.board=new Array(this.dimensions*this.dimensions).fill(0),this.gameState.score=0,this.gameState.won=!1,this.gameState.over=!1,this.makeTwoNewTiles()}},{key:"loadGame",value:function(e){this.gameState.board=e.board,this.gameState.score=e.score,this.gameState.won=e.won,this.gameState.over=e.over}},{key:"move",value:function(e){var t=this.gameState.board,i=!1;if("left"===e){for(var n=this.makeRowArrays(),s=[],r=0;r<this.dimensions;r++)s.push(n[r].filter((function(e){return 0!==e&&void 0!==e})));for(;!i;){for(var a=0;a<this.dimensions;a++){for(var o=0;o<s[a].length-1;o++)s[a][o]===s[a][o+1]&&(s[a][o]=2*s[a][o],s[a][o+1]=0,this.gameState.score+=s[a][o]);s[a]=s[a].filter((function(e){return 0!==e}))}i=!0}s.forEach((function(e){return e.filter((function(e){return 0!==e}))}));for(var h=0;h<this.dimensions;h++)for(var f=s[h].length;f<this.dimensions;f++)s[h].push(0);this.gameState.board=s.flat()}else if("right"===e){for(var c=this.makeRowArrays(),u=[],l=0;l<this.dimensions;l++)u.push(c[l].filter((function(e){return 0!==e&&void 0!==e})));for(;!i;){for(var m=0;m<this.dimensions;m++){for(var d=u[m].length-1;d>0;d--)u[m][d-1]===u[m][d]&&(u[m][d]=2*u[m][d],u[m][d-1]=0,this.gameState.score+=u[m][d]);u[m]=u[m].filter((function(e){return 0!==e}))}i=!0;break}u.forEach((function(e){return e.filter((function(e){return 0!==e}))}));for(var v=0;v<this.dimensions;v++)for(var g=u[v].length;g<this.dimensions;g++)u[v].unshift(0);this.gameState.board=u.flat()}else if("up"===e){for(var b=this.makeColArrays(),S=[],j=0;j<this.dimensions;j++)S.push(b[j].filter((function(e){return 0!==e&&void 0!==e})));for(;!i;){for(var w=0;w<this.dimensions;w++){for(var k=0;k<S[w].length-1;k++)S[w][k]===S[w][k+1]&&(S[w][k]=2*S[w][k],S[w][k+1]=0,this.gameState.score+=S[w][k]);S[w]=S[w].filter((function(e){return 0!==e}))}i=!0;break}S.forEach((function(e){return e.filter((function(e){return 0!==e}))}));for(var y=0;y<this.dimensions;y++)for(var p=S[y].length;p<this.dimensions;p++)S[y].push(0);this.gameState.board=this.flattenCols(S)}else if("down"===e){for(var O=this.makeColArrays(),N=[],x=0;x<this.dimensions;x++)N.push(O[x].filter((function(e){return 0!==e&&void 0!==e})));for(;!i;){for(var L=0;L<this.dimensions;L++){for(var A=N[L].length-1;A>0;A--)N[L][A-1]===N[L][A]&&(N[L][A]=2*N[L][A],N[L][A-1]=0,this.gameState.score+=N[L][A]);N[L]=N[L].filter((function(e){return 0!==e}))}i=!0;break}N.forEach((function(e){return e.filter((function(e){return 0!==e}))}));for(var C=0;C<this.dimensions;C++)for(var T=N[C].length;T<this.dimensions;T++)N[C].unshift(0);this.gameState.board=this.flattenCols(N)}for(var M=this.gameState.board,E=!0,G=0;G<this.dimensions*this.dimensions;G++)t[G]!==M[G]&&(E=!1);!1===E&&this.makeNewTile(),this.same=E;for(var R=0;R<this.moveListeners.length;R++)this.moveListeners[R](this.gameState);if(0!==this.gameState.board.filter((function(e){return 2048===e})).length&&void 0!==this.gameState.board.filter((function(e){return 2048===e}))&&(this.gameState.won=!0),this.gameState.won)for(var F=0;F<this.winListeners.length;F++)this.winListeners[F](this.gameState);for(var I=this.gameState.board.filter((function(e){return 0===e})).length,D=this.makeRowArrays(),B=!1,J=0;J<this.dimensions;J++)for(var P=0;P<this.dimensions-1;P++)if(D[J][P]===D[J][P+1]){B=!0;break}for(var Y=0;Y<this.dimensions-1;Y++)for(var W=0;W<this.dimensions;W++)if(D[Y][W]===D[Y+1][W]){B=!0;break}if(0!==I||B||(this.gameState.over=!0),this.gameState.over)for(var K=0;K<this.loseListeners.length;K++)this.loseListeners[K](this.gameState)}},{key:"toString",value:function(){var e=this.makeRowArrays();console.table(e)}},{key:"onMove",value:function(e){this.moveListeners.push(e)}},{key:"onWin",value:function(e){this.winListeners.push(e)}},{key:"onLose",value:function(e){this.loseListeners.push(e)}},{key:"getGameState",value:function(){return this.gameState}},{key:"makeNewTile",value:function(){for(var e=0,t=0,i=0;t<1;)e=Math.floor(100*Math.random()),i=Math.floor(Math.random()*(this.dimensions*this.dimensions)),0===this.gameState.board[i]&&(this.gameState.board[i]=e<90?2:4,t++)}},{key:"makeTwoNewTiles",value:function(){for(var e=0,t=0,i=0;t<2;)e=Math.floor(100*Math.random()),i=Math.floor(Math.random()*(this.dimensions*this.dimensions)),0===this.gameState.board[i]&&(this.gameState.board[i]=e<90?2:4,t++)}},{key:"makeColArrays",value:function(){for(var e=this,t=new Array(this.dimensions).fill(0).map((function(){return new Array(e.dimensions).fill(0)})),i=this.makeRowArrays(),n=0;n<this.dimensions;n++)for(var s=0;s<this.dimensions;s++)t[n][s]=i[s][n];return t}},{key:"flattenCols",value:function(e){for(var t=[],i=0,n=0;n<this.dimensions;n++)for(var s=0;s<this.dimensions;s++)t[i]=e[s][n],i++;return t}},{key:"makeRowArrays",value:function(){for(var e=this,t=new Array(this.dimensions).fill(0).map((function(){return new Array(e.dimensions).fill(0)})),i=0,n=0;n<this.dimensions;n++)for(var s=0;s<this.dimensions;s++)t[n][s]||(t[n][s]=this.gameState.board[i]),void 0===t[n][s]&&(t[n][s]=0),i++;return t}}]),e}(),u=i(0);var l=Object(u.jsx)("div",{className:"Instructions",children:Object(u.jsx)("p",{children:"Join the tiles to get to 2048!"})}),m=function(e){return e.gameState.over?"True! You loser!":e.gameState.over?void 0:"False! Keep playing!"},d=function(e){return e.gameState.won?"True! You winner!":e.gameState.won?void 0:"False! Not a winner yet!"},v=function(e){return e.gameState.score},g=function(){window.location.reload()},b=function(e){return e.map((function(e,t){return Object(u.jsx)("div",{className:"Tile",children:Object(u.jsx)("div",{className:"Value",children:e})},t)}))},S=function(){var e=Object(n.useState)(new c(4)),t=Object(o.a)(e,2),i=t[0],s=t[1];return Object(n.useEffect)((function(){var e=function(e){var t=new c(4);t.loadGame(i.getGameState());var n="";37===e.keyCode?(e.preventDefault(),n="left"):38===e.keyCode?(e.preventDefault(),n="up"):39===e.keyCode?(e.preventDefault(),n="right"):40===e.keyCode&&(e.preventDefault(),n="down"),""!==n&&t.move(n),s((function(e){return t}))};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[i]),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"Instructions",children:Object(u.jsx)("b",{children:l})}),Object(u.jsxs)("div",{className:"GameProgress",children:[Object(u.jsxs)("p",{className:"",children:["Game is over? It appears that is: ",Object(u.jsx)("b",{className:"Over",children:m(i)})]}),Object(u.jsxs)("p",{className:"",children:["You think you won? It appears that is: ",Object(u.jsx)("b",{className:"Won",children:d(i)})]})]}),Object(u.jsx)("div",{className:"ScoreTile",children:Object(u.jsxs)("p",{className:"Score",children:["Score: ",v(i)]})}),Object(u.jsx)("div",{className:"Tile",children:Object(u.jsx)("button",{className:"Reset",onClick:function(){return g()},children:"Reset"})}),Object(u.jsx)("div",{className:"Board",children:b(i.gameState.board)})]})})},j=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,15)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),n(e),s(e),r(e),a(e)}))};a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root")),j()}},[[14,1,2]]]);
//# sourceMappingURL=main.f954360b.chunk.js.map